// eslint-disable-next-line quotes
const workerCode = `(function(n){"use strict";
/*!
   * poly-extrude v0.0.7
    */var t={exports:{}};function r(n,t,r){r=r||2;var o,u,v,x,h,l,c,y=t&&t.length,d=y?t[0]*r:n.length,g=e(n,0,d,r,!0),m=[];if(!g||g.next===g.prev)return m;if(y&&(g=function(n,t,r,a){var o,u,v,x=[];for(o=0,u=t.length;o<u;o++)(v=e(n,t[o]*a,o<u-1?t[o+1]*a:n.length,a,!1))===v.next&&(v.steiner=!0),x.push(p(v));for(x.sort(f),o=0;o<x.length;o++)r=i(r=s(x[o],r),r.next);return r}(n,t,g,r)),n.length>80*r){o=v=n[0],u=x=n[1];for(var w=r;w<d;w+=r)(h=n[w])<o&&(o=h),(l=n[w+1])<u&&(u=l),h>v&&(v=h),l>x&&(x=l);c=0!==(c=Math.max(v-o,x-u))?1/c:0}return a(g,m,r,o,u,c),m}function e(n,t,r,e,i){var a,o;if(i===z(n,t,r,e)>0)for(a=t;a<r;a+=e)o=A(a,n[a],n[a+1],o);else for(a=r-e;a>=t;a-=e)o=A(a,n[a],n[a+1],o);return o&&g(o,o.next)&&(F(o),o=o.next),o}function i(n,t){if(!n)return n;t||(t=n);var r,e=n;do{if(r=!1,e.steiner||!g(e,e.next)&&0!==d(e.prev,e,e.next))e=e.next;else{if(F(e),(e=t=e.prev)===e.next)break;r=!0}}while(r||e!==t);return t}function a(n,t,r,e,f,s,h){if(n){!h&&s&&function(n,t,r,e){var i=n;do{null===i.z&&(i.z=l(i.x,i.y,t,r,e)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,function(n){var t,r,e,i,a,o,u,v,x=1;do{for(r=n,n=null,a=null,o=0;r;){for(o++,e=r,u=0,t=0;t<x&&(u++,e=e.nextZ);t++);for(v=x;u>0||v>0&&e;)0!==u&&(0===v||!e||r.z<=e.z)?(i=r,r=r.nextZ,u--):(i=e,e=e.nextZ,v--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;r=e}a.nextZ=null,x*=2}while(o>1)}(i)}(n,e,f,s);for(var p,c,y=n;n.prev!==n.next;)if(p=n.prev,c=n.next,s?u(n,e,f,s):o(n))t.push(p.i/r),t.push(n.i/r),t.push(c.i/r),F(n),n=c.next,y=c.next;else if((n=c)===y){h?1===h?a(n=v(i(n),t,r),t,r,e,f,s,2):2===h&&x(n,t,r,e,f,s):a(i(n),t,r,e,f,s,1);break}}}function o(n){var t=n.prev,r=n,e=n.next;if(d(t,r,e)>=0)return!1;for(var i=n.next.next;i!==n.prev;){if(c(t.x,t.y,r.x,r.y,e.x,e.y,i.x,i.y)&&d(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(n,t,r,e){var i=n.prev,a=n,o=n.next;if(d(i,a,o)>=0)return!1;for(var u=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,v=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,x=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,f=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,s=l(u,v,t,r,e),h=l(x,f,t,r,e),p=n.prevZ,y=n.nextZ;p&&p.z>=s&&y&&y.z<=h;){if(p!==n.prev&&p!==n.next&&c(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&d(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,y!==n.prev&&y!==n.next&&c(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&d(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;p&&p.z>=s;){if(p!==n.prev&&p!==n.next&&c(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&d(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=h;){if(y!==n.prev&&y!==n.next&&c(i.x,i.y,a.x,a.y,o.x,o.y,y.x,y.y)&&d(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function v(n,t,r){var e=n;do{var a=e.prev,o=e.next.next;!g(a,o)&&m(a,e,e.next,o)&&b(a,o)&&b(o,a)&&(t.push(a.i/r),t.push(e.i/r),t.push(o.i/r),F(e),F(e.next),e=n=o),e=e.next}while(e!==n);return i(e)}function x(n,t,r,e,o,u){var v=n;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&y(v,x)){var f=Z(v,x);return v=i(v,v.next),f=i(f,f.next),a(v,t,r,e,o,u),void a(f,t,r,e,o,u)}x=x.next}v=v.next}while(v!==n)}function f(n,t){return n.x-t.x}function s(n,t){var r=function(n,t){var r,e=t,i=n.x,a=n.y,o=-1/0;do{if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){var u=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(u<=i&&u>o){if(o=u,u===i){if(a===e.y)return e;if(a===e.next.y)return e.next}r=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!r)return null;if(i===o)return r;var v,x=r,f=r.x,s=r.y,l=1/0;e=r;do{i>=e.x&&e.x>=f&&i!==e.x&&c(a<s?i:o,a,f,s,a<s?o:i,a,e.x,e.y)&&(v=Math.abs(a-e.y)/(i-e.x),b(e,n)&&(v<l||v===l&&(e.x>r.x||e.x===r.x&&h(r,e)))&&(r=e,l=v)),e=e.next}while(e!==x);return r}(n,t);if(!r)return t;var e=Z(r,n),a=i(r,r.next);return i(e,e.next),t===r?a:t}function h(n,t){return d(n.prev,n,t.prev)<0&&d(t.next,n,n.next)<0}function l(n,t,r,e,i){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*i)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(n){var t=n,r=n;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==n);return r}function c(n,t,r,e,i,a,o,u){return(i-o)*(t-u)-(n-o)*(a-u)>=0&&(n-o)*(e-u)-(r-o)*(t-u)>=0&&(r-o)*(a-u)-(i-o)*(e-u)>=0}function y(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(n,t){var r=n;do{if(r.i!==n.i&&r.next.i!==n.i&&r.i!==t.i&&r.next.i!==t.i&&m(r,r.next,n,t))return!0;r=r.next}while(r!==n);return!1}(n,t)&&(b(n,t)&&b(t,n)&&function(n,t){var r=n,e=!1,i=(n.x+t.x)/2,a=(n.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(e=!e),r=r.next}while(r!==n);return e}(n,t)&&(d(n.prev,n,t.prev)||d(n,t.prev,t))||g(n,t)&&d(n.prev,n,n.next)>0&&d(t.prev,t,t.next)>0)}function d(n,t,r){return(t.y-n.y)*(r.x-t.x)-(t.x-n.x)*(r.y-t.y)}function g(n,t){return n.x===t.x&&n.y===t.y}function m(n,t,r,e){var i=M(d(n,t,r)),a=M(d(n,t,e)),o=M(d(r,e,n)),u=M(d(r,e,t));return i!==a&&o!==u||(!(0!==i||!w(n,r,t))||(!(0!==a||!w(n,e,t))||(!(0!==o||!w(r,n,e))||!(0!==u||!w(r,t,e)))))}function w(n,t,r){return t.x<=Math.max(n.x,r.x)&&t.x>=Math.min(n.x,r.x)&&t.y<=Math.max(n.y,r.y)&&t.y>=Math.min(n.y,r.y)}function M(n){return n>0?1:n<0?-1:0}function b(n,t){return d(n.prev,n,n.next)<0?d(n,t,n.next)>=0&&d(n,n.prev,t)>=0:d(n,t,n.prev)<0||d(n,n.next,t)<0}function Z(n,t){var r=new P(n.i,n.x,n.y),e=new P(t.i,t.x,t.y),i=n.next,a=t.prev;return n.next=t,t.prev=n,r.next=i,i.prev=r,e.next=r,r.prev=e,a.next=e,e.prev=a,e}function A(n,t,r,e){var i=new P(n,t,r);return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function F(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function P(n,t,r){this.i=n,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function z(n,t,r,e){for(var i=0,a=t,o=r-e;a<r;a+=e)i+=(n[o]-n[a])*(n[a+1]+n[o+1]),o=a;return i}t.exports=r,t.exports.default=r,r.deviation=function(n,t,r,e){var i=t&&t.length,a=i?t[0]*r:n.length,o=Math.abs(z(n,0,a,r));if(i)for(var u=0,v=t.length;u<v;u++){var x=t[u]*r,f=u<v-1?t[u+1]*r:n.length;o-=Math.abs(z(n,x,f,r))}var s=0;for(u=0;u<e.length;u+=3){var h=e[u]*r,l=e[u+1]*r,p=e[u+2]*r;s+=Math.abs((n[h]-n[p])*(n[l+1]-n[h+1])-(n[h]-n[l])*(n[p+1]-n[h+1]))}return 0===o&&0===s?0:Math.abs((s-o)/o)},r.flatten=function(n){for(var t=n[0][0].length,r={vertices:[],holes:[],dimensions:t},e=0,i=0;i<n.length;i++){for(var a=0;a<n[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(n[i][a][o]);i>0&&(e+=n[i-1].length,r.holes.push(e))}return r};var E=t.exports;function L(n){for(var t,r,e=0,i=1,a=n.length;i<a;)t=r||n[0],e+=((r=n[i])[0]-t[0])*(r[1]+t[1]),i++;return e>0}function I(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n}function H(n,t){var r=t[0],e=t[1],i=t[2],a=Math.sqrt(r*r+e*e+i*i)||1;return n[0]=r/a,n[1]=e/a,n[2]=i/a,n}function U(n,t){function r(n,t,r,e){n[0]=t,n[1]=r,n[2]=e}for(var e,i,a,o,u,v,x,f,s,h=[],l=[],p=[],c=[],y=[],d=[],g=n.length,m=new Float32Array(t.length),w=0;w<g;){var M=3*n[w],b=3*n[w+1],Z=3*n[w+2];r(h,t[M],t[M+1],t[M+2]),r(l,t[b],t[b+1],t[b+2]),r(p,t[Z],t[Z+1],t[Z+2]),I(y,p,l),I(c,h,l),e=d,a=c,o=void 0,u=void 0,v=void 0,x=void 0,f=void 0,s=void 0,o=(i=y)[0],u=i[1],v=i[2],x=a[0],f=a[1],s=a[2],e[0]=u*s-v*f,e[1]=v*x-o*s,e[2]=o*f-u*x;for(var A=0;A<3;A++)m[M+A]+=d[A],m[b+A]+=d[A],m[Z+A]+=d[A];w+=3}for(var F=0,P=m.length;F<P;)r(d,m[F],m[F+1],m[F+2]),H(d,d),m[F]=d[0]||0,m[F+1]=d[1]||0,m[F+2]=d[2]||0,F+=3;return m}function j(n){if(1===n.length)return{position:n[0].position,normal:n[0].normal,uv:n[0].uv,indices:n[0].indices,results:n};for(var t=0,r=0,e=0,i=n.length;e<i;e++){var a=n[e],o=a.position,u=a.indices;t+=o.length,r+=u.length}for(var v={position:new Float32Array(t),normal:new Float32Array(t),uv:new Float32Array(t/3*2),indices:new Uint32Array(r),results:n},x=0,f=0,s=0,h=0,l=0,p=n.length;l<p;l++){var c=n[l],y=c.position,d=c.indices,g=c.normal,m=c.uv;v.position.set(y,x),v.normal.set(g,x),v.uv.set(m,h);for(var w=0,M=d.length;w<M;){var b=d[w]+f;v.indices[s]=b,s++,w++}h+=m.length,x+=y.length,f+=y.length/3}return v}function O(n){return 180*n/Math.PI}function W(n){return n/180*Math.PI}function k(n,t,r,e,i,a){var o=3*r,u=3*e,v=3*i,x=3*a,f=t[o],s=t[o+1],h=t[o+2],l=t[u],p=t[u+1],c=t[u+2],y=t[v],d=t[v+1],g=t[v+2],m=t[x],w=t[x+1],M=t[x+2];Math.abs(s-p)<Math.abs(f-l)?(n.push(f,1-h),n.push(l,1-c),n.push(y,1-g),n.push(m,1-M)):(n.push(s,1-h),n.push(p,1-c),n.push(d,1-g),n.push(w,1-M))}function V(n,t){t=Object.assign({},{depth:2},t);var r=n.map((function(n){for(var r=0,e=n.length;r<e;r++){var i=n[r];_(i),0===r?L(i)||(n[r]=i.reverse()):L(i)&&(n[r]=i.reverse()),q(i)&&i.splice(i.length-1,1)}var a=function(n,t){for(var r=function(n){var t=0,r=0,e=n.length;for(;r<e;)t+=n[r].length,r++;return t}(n),e=n.length,i=[],a=new Float32Array(2*r),o=[],u=[],v=3*r,x=2*r,f=t.depth,s=0,h=0,l=0,p=0;p<e;p++){var c=n[p];p>0&&i.push(s/2);for(var y=0,d=c.length;y<d;){var g=c[y],m=g[0],w=g[1];a[s++]=m,a[s++]=w,o[h]=m,o[h+1]=w,o[h+2]=f,o[v+h]=m,o[v+h+1]=w,o[v+h+2]=0,u[l]=m,u[l+1]=w,u[x+l]=m,u[x+l+1]=w,h+=3,l+=2,y++}}return{flatVertices:a,holes:i,points:o,count:r,uvs:u}}(n,t);return a.polygon=n,function(n,t){for(var r=[],e=n.count,i=0,a=t.length;i<a;i+=3){var o=t[i],u=t[i+1],v=t[i+2];r[i]=o,r[i+1]=u,r[i+2]=v;var x=a+i,f=e+o,s=e+u,h=e+v;r[x]=f,r[x+1]=s,r[x+2]=h}n.index=r}(a,E(a.flatVertices,a.holes,2)),function(n,t){for(var r=n.points,e=n.index,i=n.polygon,a=n.uvs,o=t.depth,u=0,v=i.length;u<v;u++)for(var x=i[u],f=0,s=x.length;f<s;){var h=x[f],l=x[f+1];f===s-1&&(l=x[0]);var p=r.length/3,c=h[0],y=h[1],d=l[0],g=l[1];r.push(c,y,o,d,g,o,c,y,0,d,g,0);var m=p+2,w=p+3,M=p,b=p+1;e.push(m,M,w,M,b,w),k(a,r,m,w,M,b),f++}}(a,t),a.position=new Float32Array(a.points),a.indices=new Uint32Array(a.index),a.uv=new Float32Array(a.uvs),a.normal=U(a.indices,a.position),a})),e=j(r);return e.polygons=n,e}function _(n){q(n)||n.push(n[0])}function q(n){var t=n.length,r=n[0],e=r[0],i=r[1],a=n[t-1],o=a[0],u=a[1];return e===o&&i===u}function R(n,t){t=Object.assign({},{depth:2,lineWidth:1},t);var r=n.map((function(n){var r=function(n,t){var r=0,e=t.lineWidth/2,i=[],a=[],o=[],u=n.length,v=0;for(;v<u-1;){var x=n[v],f=n[v+1],s=f[1]-x[1],h=f[0]-x[0],l=0,p=O(Math.atan(s/h));if(r=p,0===v)l=p,l-=90;else{var c=n[v-1];S.x=c[0]-x[0],S.y=c[1]-x[1],B.x=f[0]-x[0],B.y=f[1]-x[1],l=p-D(S,B)/2}var y=C(W(l),e,x),d=y[0],g=y[1];i.push(d,g),G(d,x,f)?(a.push(d),o.push(g)):(a.push(g),o.push(d)),v++}var m=r,w=W(m-=90),M=n[u-2],b=n[u-1],Z=C(w,e,b),A=Z[0],F=Z[1];i.push(A,F),G(A,M,b)?(a.push(A),o.push(F)):(a.push(F),o.push(A));return{offsetPoints:i,leftPoints:a,rightPoints:o}}(n,t);return r.line=n,function(n,t){var r=t.depth,e=[],i=[],a=[],o=n.leftPoints,u=n.rightPoints,v=0,x=o.length;for(;v<x;){var f=3*v,s=o[v],h=s[0],l=s[1];e[f]=h,e[f+1]=l,e[f+2]=r;var p=u[v],c=p[0],y=p[1],d=3*x+f;e[d]=c,e[d+1]=y,e[d+2]=r;var g=2*x*3+f;e[g]=h,e[g+1]=l,e[g+2]=0;var m=2*x*3+3*x+f;e[m]=c,e[m+1]=y,e[m+2]=0,v++}v=0,x=e.length;for(;v<x;){var w=e[v],M=e[v+1];a.push(w,M),v+=3}v=0,x=o.length;for(;v<x-1;){var b=v,Z=v+1,A=b+x,F=Z+x;i.push(b,A,Z),i.push(A,F,Z);var P=v+2*x,z=P+1,E=P+x,L=z+x;i.push(P,E,z),i.push(E,L,z),v++}n.index=i,n.points=e,n.uvs=a}(r,t),function(n,t){var r=n.points,e=n.index,i=n.leftPoints,a=n.rightPoints,o=n.uvs,u=t.depth,v=[i,a];function x(n,t){var i=r.length/3;r.push(n[0],n[1],u,t[0],t[1],u,n[0],n[1],0,t[0],t[1],0);var a=i+2,v=i+3,x=i,f=i+1;e.push(a,x,v,x,f,v),k(o,r,a,v,x,f)}for(var f=0,s=v.length;f<s;f++){var h=v[f];f>0&&(h=(h=h.map((function(n){return n}))).reverse());for(var l=0,p=h.length-1;l<p;){x(h[l],h[l+1]),l++}}for(var c=i.length,y=[a[0],i[0],i[c-1],a[c-1]],d=0;d<y.length;d+=2){x(y[d],y[d+1])}}(r,t),r.position=new Float32Array(r.points),r.indices=new Uint32Array(r.index),r.uv=new Float32Array(r.uvs),r.normal=U(r.indices,r.position),r})),e=j(r);return e.lines=n,e}var S={x:0,y:0},B={x:0,y:0};function C(n,t,r){var e=r[0],i=r[1],a=[e+Math.cos(n)*t,i+Math.sin(n)*t],o=n+=Math.PI;return[a,[e+Math.cos(o)*t,i+Math.sin(o)*t]]}var D=function(n,t){var r=n.x,e=n.y,i=t.x,a=t.y,o=r*i+e*a,u=r*a-e*i;return(Math.atan2(u,o)/Math.PI*180+360)%360};function G(n,t,r){var e=t[0],i=t[1],a=r[0],o=r[1];return(i-o)*n[0]+(a-e)*n[1]+e*o-a*i>0}var J={x:0,y:0},K={x:0,y:0};function N(n,t,r,e){for(var i=n.length,a=0;a<i;a++){var o=n[a].data;t=n[a].center||t;for(var u=0,v=o.length;u<v;u++)for(var x=o[u],f=0,s=x.length;f<s;f++)n[a].data[u][f]=Q(x[f],t,r,e)}}function Q(n,t,r,e){for(var i,a=[],o=0,u=(i=r?new Float64Array(n):new Float32Array(n)).length;o<u;o+=2){var v=i[o],x=i[o+1];if(t&&r&&e){J.x=v,J.y=x;var f=en(J,K);J.x=f.x,J.y=f.y,v=(f=an(e,J,r,K)).x,x=f.y,v-=t[0],x-=t[1]}a.push([v,x])}return a}function T(n,t){void 0===t&&(t=!1);for(var r=n.length,e=[],i=[],a=0,o=0;o<r;o++){var u=t?Y(n[o]):X(n[o]),v=n[o].bottomHeight||0,x=u.position;i.push(u);var f=x.length/3;e[o]={position:{middleZ:v+(n[o].height||0)/2,count:f,start:a,end:a+3*f},hide:!1},a+=3*f}var s=function(n){for(var t={},r={},e=0;e<n.length;++e){var i=n[e];for(var a in i)void 0===t[a]&&(t[a]=[],r[a]=0),t[a].push(i[a]),r[a]+=i[a].length}var o={},u=0,v=[];for(var x in t)if("indices"===x)for(var f=t[x],s=0,h=f.length;s<h;s++){for(var l=f[s],p=0,c=l.length;p<c;p++)v.push(l[p]+u);u+=t.position[s].length/3}else{var y=$(t[x],r[x]);if(!y)return null;o[x]=y}return o.indices=new Uint32Array(v),o}(i),h=s.position,l=s.normal,p=s.uv,c=s.indices;return{position:h.buffer,normal:l.buffer,uv:p.buffer,indices:c.buffer,geometriesAttributes:e}}function X(n){var t=n.data,r=n.height,e=n.bottomHeight,i=V(t,{depth:r}),a=i.position,o=i.normal,u=i.uv,v=i.indices;return nn(a,e),{position:a,normal:o,uv:u,indices:v}}function Y(n){var t=n.data,r=n.height,e=n.width,i=n.bottomHeight,a=R(t,{lineWidth:e,depth:r}),o=a.position,u=a.normal,v=a.uv,x=a.indices;return nn(o,i),{position:o,normal:u,uv:v,indices:x}}function $(n,t){for(var r=new Float32Array(t),e=0,i=0;i<n.length;++i)r.set(n[i],e),e+=n[i].length;return r}function nn(n,t){if(void 0!==t&&"number"==typeof t&&0!==t)for(var r=0,e=n.length;r<e;r+=3)n[r+2]+=t}var tn=Math.PI/180,rn=6378137*Math.PI/180;function en(n,t){var r,e=85.0511287798,i=n.x,a=Math.max(Math.min(e,n.y),-e);r=0===a?0:Math.log(Math.tan((90+a)*tn/2))/tn;var o=i*rn,u=r*rn;return t?(t.x=o,t.y=u,t):{x:o,y:u}}function an(n,t,r,e){var i=n[0]*(t.x-n[2])/r,a=-n[1]*(t.y-n[3])/r;return e?(e.x=i,e.y=a,e):{x:i,y:a}}function on(n){void 0===n&&(n=[]);for(var t=n.length,r=new Float32Array(3*t),e=0;e<t;e++){var i=n[e],a=3*e;r[a]=i[0],r[a+1]=i[1]}return r}function un(n){for(var t=new Float32Array(2*n.length-6),r=0,e=0,i=n.length/3;e<i;e++){var a=n[3*e],o=n[3*e+1],u=n[3*e+2];if(e>0&&e<i-1){var v=3*r;t[v]=a,t[v+1]=o,t[v+2]=u,r++}var x=3*r;t[x]=a,t[x+1]=o,t[x+2]=u,r++}return t}function vn(n){var t=0,r=n.length;if(1===r)return n[0];for(var e=0;e<r;e++)t+=n[e].length;for(var i=new Float32Array(t),a=0,o=0;o<r;o++)i.set(n[o],a),a+=n[o].length;return i}n.initialize=function(){},n.onmessage=function(n,t){var r=n.data,e=r.type,i=r.datas,a=r.glRes,o=r.matrix,u=r.center;if("ExtrudePolygons"===e){N(i,u,a,o);var v=T(i);t(null,v,[v.position,v.normal,v.uv,v.indices])}else if("ExtrudeLines"===e){for(var x=0,f=i.length;x<f;x++)for(var s=0,h=i[x].data.length;s<h;s++)i[x].data[s]=Q(i[x].data[s],i[x].center||u,a,o);var l=T(i,!0);t(null,l,[l.position,l.normal,l.uv,l.indices])}else if("ExtrudePolygon"===e){var p=[],c=[];i.forEach((function(n){var t=[n];N(t,u,a,o);var r=T(t),e=r.position,i=r.normal,v=r.uv,x=r.indices;p.push({id:n.id,position:e,normal:i,uv:v,indices:x}),c.push(e,i,v,x)})),t(null,p,c)}else if("Line"===e||"FatLine"===e){for(var y=[],d=[],g=0,m=i.length;g<m;g++){for(var w=[],M=0,b=i[g].data.length;M<b;M++){i[g].data[M]=Q(i[g].data[M],i[g].center||u,a,o);var Z=on(i[g].data[M]);w.push(un(Z))}var A=vn(w);nn(A,i[g].bottomHeight),y.push({id:i[g].id,position:A.buffer}),d.push(A.buffer)}t(null,y,d)}else if("Lines"===e||"FatLines"===e){for(var F=0,P=[],z=[],E=0,L=[],I=0,H=i.length;I<H;I++){for(var U=0,j=0,O=i[I].data.length;j<O;j++){i[I].data[j]=Q(i[I].data[j],i[I].center||u,a,o);var W=on(i[I].data[j]);nn(W,i[I].bottomHeight),U+=W.length/3*2-2,L.push(un(W))}var k=U;P[I]=[F,F+k],F+=k,z[I]={position:{count:U,start:E,end:E+3*U},hide:!1},"FatLines"===e&&(z[I].instanceStart={count:U,start:E,end:E+3*U},z[I].instanceEnd={count:U,start:E,end:E+3*U}),E+=3*U}var V=vn(L);t(null,{id:i.id,position:V.buffer,geometriesAttributes:z,faceMap:P},[V.buffer])}else if("ExtrudeLine"===e){for(var _=0,q=i.length;_<q;_++)for(var R=0,S=i[_].data.length;R<S;R++)i[_].data[R]=Q(i[_].data[R],i[_].center||u,a,o);var B=[],C=[];i.forEach((function(n){var t=T([n],!0),r=t.position,e=t.normal,i=t.uv,a=t.indices;B.push({id:n.id,position:r,normal:e,uv:i,indices:a}),C.push(r,e,i,a)})),t(null,B,C)}},Object.defineProperty(n,"__esModule",{value:!0})})`;
const workerName = '__maptalks.three__';

export function getWorkerName() {
    return workerName;
}

export function getWorkerCode() {
    return workerCode;
}
